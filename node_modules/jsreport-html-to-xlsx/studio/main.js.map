{"version":3,"sources":["webpack:///webpack/bootstrap b296a219a1e75c88fceb","webpack:///./studio/main_dev.js","webpack:///./studio/HtmlToXlsxProperties.js","webpack:///external \"Studio.libraries['react']\"","webpack:///external \"Studio\""],"names":["Studio","addPropertiesComponent","Properties","entity","__entitySet","recipe","addApiSpec","template","htmlToXlsx","htmlEngine","EntityRefSelect","entities","Object","keys","filter","k","map","baseXlsxTemplate","shortid","foundItems","selectXlsxTemplates","e","length","name","props","applyDefaultsToEntity","bind","changeHtmlToXlsx","removeInvalidXlsxTemplateReferences","nextProps","_id","onChange","updatedXlsxTemplates","htmlEngines","extensions","options","entityNeedsDefault","__isNew","change","v","target","value","engine","insertToXlsxTemplate","checked","references","xlsxTemplates","selected","waitForJS","Component"],"mappings":"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","file":"./studio/main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap b296a219a1e75c88fceb\n **/","import Properties from './HtmlToXlsxProperties'\nimport Studio from 'jsreport-studio'\n\nStudio.addPropertiesComponent('html to xlsx', Properties, (entity) => entity.__entitySet === 'templates' && entity.recipe === 'html-to-xlsx')\n\nStudio.addApiSpec({\n  template: {\n    htmlToXlsx: {\n      htmlEngine: '...'\n    }\n  }\n})\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/main_dev.js\n **/","import React, { Component } from 'react'\nimport Studio from 'jsreport-studio'\n\nconst EntityRefSelect = Studio.EntityRefSelect\n\nclass Properties extends Component {\n  static selectXlsxTemplates (entities) {\n    return Object.keys(entities).filter((k) => entities[k].__entitySet === 'xlsxTemplates').map((k) => entities[k])\n  }\n\n  static title (entity, entities) {\n    if (!entity.baseXlsxTemplate || !entity.baseXlsxTemplate.shortid) {\n      return 'xlsx template'\n    }\n\n    const foundItems = Properties.selectXlsxTemplates(entities).filter((e) => entity.baseXlsxTemplate.shortid === e.shortid)\n\n    if (!foundItems.length) {\n      return 'xlsx template'\n    }\n\n    return 'xlsx template: ' + foundItems[0].name\n  }\n\n  constructor (props) {\n    super(props)\n\n    this.applyDefaultsToEntity = this.applyDefaultsToEntity.bind(this)\n    this.changeHtmlToXlsx = this.changeHtmlToXlsx.bind(this)\n  }\n\n  componentDidMount () {\n    this.applyDefaultsToEntity(this.props)\n    this.removeInvalidXlsxTemplateReferences()\n  }\n\n  componentWillReceiveProps (nextProps) {\n    // when component changes because another template is created\n    if (this.props.entity._id !== nextProps.entity._id) {\n      this.applyDefaultsToEntity(nextProps)\n    }\n  }\n\n  componentDidUpdate () {\n    this.removeInvalidXlsxTemplateReferences()\n  }\n\n  removeInvalidXlsxTemplateReferences () {\n    const { entity, entities, onChange } = this.props\n\n    if (!entity.baseXlsxTemplate) {\n      return\n    }\n\n    const updatedXlsxTemplates = Object.keys(entities).filter((k) => entities[k].__entitySet === 'xlsxTemplates' && entities[k].shortid === entity.baseXlsxTemplate.shortid)\n\n    if (updatedXlsxTemplates.length === 0) {\n      onChange({ _id: entity._id, baseXlsxTemplate: null })\n    }\n  }\n\n  applyDefaultsToEntity (props) {\n    const { entity } = props\n    const htmlEngines = Studio.extensions['html-to-xlsx'].options.htmlEngines\n    let entityNeedsDefault = false\n\n    if (\n      entity.__isNew ||\n      (entity.htmlToXlsx == null || entity.htmlToXlsx.htmlEngine == null)\n    ) {\n      entityNeedsDefault = true\n    }\n\n    if (htmlEngines != null && htmlEngines[0] != null && entityNeedsDefault) {\n      this.changeHtmlToXlsx(props, {\n        htmlEngine: htmlEngines[0]\n      })\n    }\n  }\n\n  changeHtmlToXlsx (props, change) {\n    const { entity, onChange } = props\n    const htmlToXlsx = entity.htmlToXlsx || {}\n\n    onChange({\n      ...entity,\n      htmlToXlsx: { ...htmlToXlsx, ...change }\n    })\n  }\n\n  render () {\n    const { entity, onChange } = this.props\n    const htmlToXlsx = entity.htmlToXlsx || {}\n    const htmlEngines = Studio.extensions['html-to-xlsx'].options.htmlEngines\n\n    return (\n      <div className='properties-section'>\n        <div className='form-group'>\n          <label>html engine</label>\n          <select\n            value={htmlToXlsx.htmlEngine}\n            onChange={(v) => this.changeHtmlToXlsx(this.props, { htmlEngine: v.target.value })}\n          >\n            {htmlEngines.map((engine) => (\n              <option key={engine} value={engine}>{engine}</option>\n            ))}\n          </select>\n        </div>\n        <div className='form-group'>\n          <label>insert table output to xlsx template</label>\n          <input\n            type='checkbox' checked={htmlToXlsx.insertToXlsxTemplate === true}\n            onChange={(v) => this.changeHtmlToXlsx(this.props, { insertToXlsxTemplate: v.target.checked })} />\n        </div>\n        {htmlToXlsx.insertToXlsxTemplate === true && (\n          <div className='form-group'>\n            <label>xlsx template</label>\n            <EntityRefSelect\n              headingLabel='Select xlsx template'\n              filter={(references) => ({ xlsxTemplates: references.xlsxTemplates })}\n              value={entity.baseXlsxTemplate ? entity.baseXlsxTemplate.shortid : null}\n              onChange={(selected) => onChange({ _id: entity._id, baseXlsxTemplate: selected != null && selected.length > 0 ? { shortid: selected[0].shortid } : null })}\n            />\n          </div>\n        )}\n        <div className='form-group'>\n          <label title='window.JSREPORT_READY_TO_START=true;'>wait for conversion trigger</label>\n          <input\n            type='checkbox' title='window.JSREPORT_READY_TO_START=true;' checked={htmlToXlsx.waitForJS === true}\n            onChange={(v) => this.changeHtmlToXlsx(this.props, { waitForJS: v.target.checked })} />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Properties\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/HtmlToXlsxProperties.js\n **/","module.exports = Studio.libraries['react'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.libraries['react']\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = Studio;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio\"\n ** module id = 3\n ** module chunks = 0\n **/"],"sourceRoot":""}