{"version":3,"sources":["webpack:///webpack/bootstrap 3575540153ac3050a6f7","webpack:///./studio/main_dev.js","webpack:///./studio/Properties.js","webpack:///external \"Studio.libraries['react']\"","webpack:///external \"Studio\""],"names":["Studio","addApiSpec","options","language","addPropertiesComponent","Properties","title","entity","__entitySet","MultiSelect","entities","Object","keys","filter","k","map","removeInvalidDataReferences","props","onChange","resources","items","length","updatedResources","s","shortid","_id","defaultLanguage","data","selectData","selectValues","selectedValue","value","i","optionIsSelected","indexOf","push","entitySet","v","target","key","d","name","getName","foundData","sc","getSelectedResources","join","Component"],"mappings":"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","file":"./studio/main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 3575540153ac3050a6f7\n **/","import Properties from './Properties.js'\nimport Studio from 'jsreport-studio'\n\nStudio.addApiSpec({\n  options: {\n    language: 'en'\n  }\n})\n\nStudio.addPropertiesComponent(Properties.title, Properties, (entity) => entity.__entitySet === 'templates')\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/main_dev.js\n **/","import React, { Component } from 'react'\nimport Studio from 'jsreport-studio'\n\nconst MultiSelect = Studio.MultiSelect\n\nexport default class Properties extends Component {\n  selectData (entities) {\n    return Object.keys(entities).filter((k) => entities[k].__entitySet === 'data').map((k) => entities[k])\n  }\n\n  static getSelectedResources (entity, entities) {\n    const getName = (s) => {\n      const foundData = Object.keys(entities).map((k) => entities[k]).filter((sc) => sc.shortid === s.shortid)\n\n      return foundData.length ? foundData[0].name : ''\n    }\n\n    return ((entity.resources || {}).items || []).map((d) => ({\n      ...d,\n      name: getName(d)\n    }))\n  }\n\n  componentDidMount () {\n    this.removeInvalidDataReferences()\n  }\n\n  componentDidUpdate () {\n    this.removeInvalidDataReferences()\n  }\n\n  static title (entity, entities) {\n    if (!entity.resources) {\n      return 'resources'\n    }\n\n    return `resources: ${entity.resources.defaultLanguage || ''} ` + Properties.getSelectedResources(entity, entities).map((s) => s.name).join(', ')\n  }\n\n  removeInvalidDataReferences () {\n    const { entity, entities, onChange } = this.props\n\n    if (!entity.resources || !entity.resources.items.length) {\n      return\n    }\n\n    const updatedResources = entity.resources.items.filter((s) => Object.keys(entities).filter((k) => entities[k].__entitySet === 'data' && entities[k].shortid === s.shortid).length)\n\n    if (updatedResources.length !== entity.resources.items.length) {\n      onChange({ _id: entity._id, resources: { defaultLanguage: entity.resources.defaultLanguage, items: updatedResources } })\n    }\n  }\n\n  render () {\n    const { entity, entities, onChange } = this.props\n    const data = this.selectData(entities)\n\n    const selectValues = (selectData) => {\n      const { value: selectedValue, options } = selectData\n      let items = []\n\n      for (var i = 0; i < options.length; i++) {\n        const optionIsSelected = selectedValue.indexOf(options[i].value) !== -1\n\n        if (optionIsSelected) {\n          if (!items.filter((s) => s.shortid === options[i].value).length) {\n            items.push({ shortid: options[i].value })\n          }\n        } else {\n          if (items.filter((s) => s.shortid === options[i].value).length) {\n            items = items.filter((s) => s.shortid !== options[i].value)\n          }\n        }\n      }\n\n      return items.map((i) => ({ ...i, entitySet: 'data' }))\n    }\n\n    const items = (entity.resources || {}).items || []\n    const defaultLanguage = (entity.resources || {}).defaultLanguage\n\n    return (\n      <div className='properties-section'>\n        <div className='form-group'><label>Default language <a href='http://jsreport.net/learn/resources' target='_blank'><i className='fa fa-question' /> </a></label>\n          <input\n            type='text' placeholder='en' value={defaultLanguage || ''}\n            onChange={(v) => onChange({_id: entity._id, resources: {defaultLanguage: v.target.value, items: items}})} />\n        </div>\n        <div className='form-group'>\n          <MultiSelect\n            title='Use the checkboxes to select/deselect multiple options'\n            size={7}\n            value={items.map((s) => s.shortid)}\n            onChange={(selectData) => onChange({ _id: entity._id, resources: { items: selectValues(selectData), defaultLanguage: defaultLanguage } })}\n            options={data.map(d => ({ key: d.shortid, name: d.name, value: d.shortid }))}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/Properties.js\n **/","module.exports = Studio.libraries['react'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.libraries['react']\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = Studio;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio\"\n ** module id = 3\n ** module chunks = 0\n **/"],"sourceRoot":""}